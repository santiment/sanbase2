ARG ELIXIR_VERSION=1.15.0
ARG OTP_VERSION=26.0.2
ARG DEBIAN_VERSION=buster-20230612-slim

ARG BUILDER_IMAGE="hexpm/elixir:${ELIXIR_VERSION}-erlang-${OTP_VERSION}-debian-${DEBIAN_VERSION}"
ARG RUNNER_IMAGE="debian:${DEBIAN_VERSION}" 

FROM ${BUILDER_IMAGE}


RUN apk add --no-cache make \
                       g++ \
                       git \
                       postgresql-client \
                       nodejs \
                       nodejs-npm \
                       inotify-tools \
                       imagemagick \
                       openssl \
                       wget \
                       rust \
                       cargo

RUN mix local.hex --force
RUN mix local.rebar --force
RUN mix archive.install hex phx_new 1.6.14

#RUN mix format --check-formatted

WORKDIR /app
